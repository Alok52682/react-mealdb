{"ast":null,"code":"import _slicedToArray from\"/Users/alok/Desktop/Project/milstone-8-simple-react/module-49.5-practice/react-mealdb/node_modules/@babel/runtime/helpers/esm/slicedToArray.js\";import React,{useEffect,useState}from'react';import Cart from'../Cart/Cart';import Meal from'../Meal/Meal';import{addToDb,getCart}from'../Utilities/Fakedb';import'./main.css';import{jsx as _jsx}from\"react/jsx-runtime\";import{jsxs as _jsxs}from\"react/jsx-runtime\";var Main=function Main(){var _useState=useState([]),_useState2=_slicedToArray(_useState,2),meals=_useState2[0],setMeals=_useState2[1];var _useState3=useState([]),_useState4=_slicedToArray(_useState3,2),inCart=_useState4[0],setInCart=_useState4[1];var _useState5=useState(''),_useState6=_slicedToArray(_useState5,2),search=_useState6[0],setSearch=_useState6[1];var _useState7=useState(false),_useState8=_slicedToArray(_useState7,2),update=_useState8[0],setUpdate=_useState8[1];useEffect(function(){fetch(\"https://www.themealdb.com/api/json/v1/1/search.php?s=\".concat(search)).then(function(res){return res.json();}).then(function(data){return setMeals(data.meals);});},[search]);useEffect(function(){var cart=getCart();var savedCart=[];var _loop=function _loop(id){var addedMeal=meals.find(function(meal){return meal.idMeal===id;});if(addedMeal){var quantity=cart[id];cart.quantity=quantity;savedCart.push(addedMeal);}};for(var id in cart){_loop(id);}setInCart(savedCart);},[meals,update]);var clickHandel=function clickHandel(id){var getData=getCart();// console.log(getData, id);\nif(getData[id.idMeal]){alert('Already Exist');}else{addToDb(id.idMeal);setUpdate(!update);}};return/*#__PURE__*/_jsxs(\"div\",{className:\"main\",children:[/*#__PURE__*/_jsxs(\"div\",{className:\"meals\",children:[/*#__PURE__*/_jsx(\"input\",{onChange:function onChange(e){return setSearch(e.target.value);},type:\"text\",placeholder:\"Search food\"}),/*#__PURE__*/_jsxs(\"h1\",{style:{textAlign:'center'},children:[\"Total Meal : \",meals===null||meals===void 0?void 0:meals.length]}),/*#__PURE__*/_jsx(\"div\",{className:\"allMeals\",children:!meals?/*#__PURE__*/_jsx(\"div\",{children:\"meal not found\"}):meals.map(function(meal){return/*#__PURE__*/_jsx(Meal,{handel:clickHandel,meal:meal},meal.idMeal);})})]}),/*#__PURE__*/_jsx(\"div\",{className:\"cartSection\",children:/*#__PURE__*/_jsx(Cart,{clear:setUpdate,update:update,cart:inCart})})]});};export default Main;","map":{"version":3,"names":["React","useEffect","useState","Cart","Meal","addToDb","getCart","Main","meals","setMeals","inCart","setInCart","search","setSearch","update","setUpdate","fetch","then","res","json","data","cart","savedCart","id","addedMeal","find","meal","idMeal","quantity","push","clickHandel","getData","alert","e","target","value","textAlign","length","map"],"sources":["/Users/alok/Desktop/Project/milstone-8-simple-react/module-49.5-practice/react-mealdb/src/Components/Main/Main.js"],"sourcesContent":["import React, { useEffect, useState } from 'react';\nimport Cart from '../Cart/Cart';\nimport Meal from '../Meal/Meal';\nimport { addToDb, getCart } from '../Utilities/Fakedb';\nimport './main.css'\n\nconst Main = () => {\n    const [meals, setMeals] = useState([])\n    const [inCart, setInCart] = useState([])\n    const [search, setSearch] = useState('')\n    const [update, setUpdate] = useState(false)\n\n    useEffect(() => {\n        fetch(`https://www.themealdb.com/api/json/v1/1/search.php?s=${search}`)\n            .then(res => res.json())\n            .then(data => setMeals(data.meals))\n    }, [search])\n\n    useEffect(() => {\n        const cart = getCart();\n\n        const savedCart = [];\n        for (const id in cart) {\n            const addedMeal = meals.find(meal => meal.idMeal === id);\n            if (addedMeal) {\n                const quantity = cart[id];\n                cart.quantity = quantity;\n                savedCart.push(addedMeal);\n            }\n\n        }\n        setInCart(savedCart);\n\n    }, [meals, update])\n\n    const clickHandel = (id) => {\n        const getData = getCart();\n        // console.log(getData, id);\n        if (getData[id.idMeal]) {\n            alert('Already Exist');\n        }\n        else {\n            addToDb(id.idMeal);\n            setUpdate(!update)\n        }\n\n\n    }\n    return (\n        <div className='main'>\n            <div className='meals'>\n                <input onChange={(e) => setSearch(e.target.value)} type=\"text\" placeholder='Search food' />\n                <h1 style={{ textAlign: 'center' }}>Total Meal : {meals?.length}</h1>\n                <div className=\"allMeals\">\n                    {\n                        !meals ? <div>meal not found</div> : meals.map(meal => <Meal handel={clickHandel} key={meal.idMeal} meal={meal}></Meal>)\n                    }\n                </div>\n            </div>\n            <div className=\"cartSection\">\n                <Cart clear={setUpdate} update={update} cart={inCart}></Cart>\n            </div>\n        </div>\n    );\n};\n\nexport default Main;"],"mappings":"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"},"metadata":{},"sourceType":"module"}